using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Accord.MachineLearning;
using Accord.Math;
using Accord.Statistics.Kernels;


class K_MeansAlgorithm
    {

    public double[] x = new double[10];
    public double[] y = new double[10];


    public void AssignDataFromPerson(double age,double income, int i)
    {
        this.x[i] = age;
        this.y[i] = income;

    }

    public void Init()
    {
        // Perform KMeans clustering on each dataset
        PerformKMeansClustering(/*this.x, this.y*/);
    }

    static public void PerformKMeansClustering()
    {
        int k = 3;
        

        // Create KMeans algorithm
        KMeans kmeans = new KMeans(k);
        
        List<double[]> data = new List<double[]>();

        List<double[]> data1 = GenerateDataPoints(10);
        List<double[]> data2 = GenerateDataPoints(10);

        data.AddRange(data1);
        data.AddRange(data2);

        // Compute clusters
        int[] clusterAssignments = kmeans.Compute(data.ToArray());

        // Print cluster assignments for data1
        Console.WriteLine("\n\n\n\n Cluster assignments for data1:");
        for (int i = 0; i < clusterAssignments.Length / 2; i++)
        {
            Console.WriteLine($"Data point {data[i+1][0]:F2} belongs to cluster {clusterAssignments[i] + 1}");
        }

        double[][] clusterCentroids = kmeans.Clusters.Centroids;

        // Print the positions of cluster centroids
        Console.WriteLine("Cluster centroids:");
        for (int i = 0; i < clusterCentroids.Length; i++)
        {
            Console.WriteLine($"Cluster {i + 1}: ({clusterCentroids[i][0]:F2}, {clusterCentroids[i][1]:F2})");
        }

        // Print cluster assignments for data2
        Console.WriteLine("\n\n Cluster assignments for data2:");
        for (int i = clusterAssignments.Length / 2; i < clusterAssignments.Length; i++)
        {
            Console.WriteLine($"Data point {i - clusterAssignments.Length / 2 + 1} belongs to cluster {clusterAssignments[i] + 1}");
        }
    }

    static List<double[]> GenerateDataPoints(int numPoints)
    {
        Random rand = new Random();
        List<double[]> data = new List<double[]>();

        for (int i = 0; i < numPoints; i++)
        {
            double x = rand.NextDouble() * 10;
            double y = rand.NextDouble() * 10;
            data.Add(new double[] { x, y });
        }

        return data;
    }


}
